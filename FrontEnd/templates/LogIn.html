<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

    <link href="https://fonts.googleapis.com/css2?family=Rubik+Mono+One&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu+Mono&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='images/logo.png') }}">
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
    
    <title>Log In</title>
</head>

<body class="login-page-body">

    <nav class="navbar navbar-expand-lg navbar-light custom-navbar fixed-top">
       <a class="navbar-brand" href="/">
            <img src="{{ url_for('static', filename='images/logo.png') }}" alt="Gelato e CaffÃ¨ Logo" class="navbar-logo">
        </a>
      
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
      
        <ul class="navbar-nav mr-auto nav-fill">
            <li class="nav-item active">
                <a class="nav-link" href="{{ url_for('handle_menu') }}">Menu <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item active">
                <a class="nav-link" href="/#Location-section">Location <span class="sr-only">(current)</span></a>
            </li>
        
            <li class="nav-item active">
                <a class="nav-link" href="{{ url_for('reviews') }}">Reviews <span class="sr-only">(current)</span></a>
            </li>

            <li class="nav-item active">
                <a class="nav-link" href="{{ url_for('reservation') }}">Reservation <span class="sr-only">(current)</span></a>
            </li>
        
            <li class="nav-item active">
                <a class="nav-link" href="/#About-Us-section">About Us <span class="sr-only">(current)</span></a>
            </li>
        </ul>
    </nav>

    <section class="vh-100">
        <div class="container py-5 h-100">
          <div class="row d-flex justify-content-center align-items-center h-100">
            <div class="col col-xl-10">
              <div class="card" style="border-radius: 1rem;">
                <div class="row g-0">
                  <div class="col-md-6 col-lg-5 d-none d-md-block">
                    <img src="{{ url_for('static', filename='images/loginB.jpg') }}"
                      alt="login form" class="img-fluid" style="border-radius: 1rem 0 0 1rem;" />
                  </div>
                  <div class="col-md-6 col-lg-7 d-flex align-items-center">
                    <div class="card-body p-4 p-lg-5 text-black">
      
                      <form action="/LogIn" method="post">
                        <h5 class="fw-normal mb-3 pb-3" style="letter-spacing: 1px; font-family: 'Open Sans', sans-serif; font-weight: bold;">Log In</h5>
      
                        <div class="form-outline mb-4">
                        <label class="form-label" for="form2Example17">Email address</label>
                          <input type="email" id="email" name="email" class="form-control form-control-lg" />
                          
                        </div>
      
                        <div class="form-outline mb-4">
                          <label class="form-label" for="form2Example27">Password</label>
                          <input type="password" id="password" name="password" class="form-control form-control-lg" />
                          
                        </div>
      
                        <div class="pt-1 mb-4">
                          <button class="btn btn-dark btn-lg btn-block" type="submit" style="background-color: #02594d;">Login</button>
                        </div>
      
                        <p class="mb-5 pb-lg-2" style="color: #0c0e20; font-size: 18px;">Don't have an account? <a href="{{ url_for('signup') }}"
                            style="color: #161e8d;">Sign Up</a></p>

                      </form>
      
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>


<script>
  document.querySelector('form').addEventListener('submit', function(event) {
    event.preventDefault();  

    const formData = new FormData(event.target);
    const email = formData.get('email');
    const password = formData.get('password');

    // Send 
    fetch('/LogIn', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/x-www-form-urlencoded',
      },
      body: new URLSearchParams({
        'email': email,
        'password': password,
      }),
    })
    .then(response => {
      if (!response.ok) {
        //  unsuccessful
        return response.json().then(data => {
          alert(data.error);
        });
      } else {
        //  successflogin
        window.location.href = '/'; 
      }
    })
    .catch(error => {
      console.error('Error:', error);
    });
  });
</script>

</body>
</html>
